<!DOCTYPE HTML>
<html>
<title>ClassAnalyzer</title>
<head>
    <script language="javascript" type="text/javascript"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
    <script src="second.js"></script>
    <script>
    var config = {
    apiKey: "AIzaSyBh0U1gENXIsEjB-gnJgjabaVxBSrFa7Qs",
    authDomain: "database-3d971.firebaseapp.com",
    databaseURL: "https://database-3d971.firebaseio.com",
    projectId: "database-3d971",
    storageBucket: "database-3d971.appspot.com",
    messagingSenderId: "223031201948"
    };

    firebase.initializeApp(config);
    database=firebase.firestore();

    </script>


    <script>
    database.collection("Student").get().then(function(StudentSnapshot) {

        var averagesum=0;
        var stucount=0;

    StudentSnapshot.forEach(function (Student) {
        averagesum= averagesum +Student.data().Midterm1 + Student.data().Final ;
        stucount++;

    });

     var average=(averagesum)/(stucount*2);
      var studata=[];
      var length=0;

        StudentSnapshot.forEach(function (Student) {

            var midterm = Student.data().Midterm1;
            var final = Student.data().Final;
            var stuname = Student.data().Name;

            studata.push([]);
            studata[length][0] = stuname;
            studata[length][1] = midterm;
            studata[length][2] = final;
            length++;

        });

        var finalarray=[];

        for(var i=0;i<length;i++)
        {
            makearray(finalarray,plotdatapoints(studata[i][0],studata[i][1]),studata[i][2]);
        }

        console.log(finalarray.valueOf());

    window.onload = function () {
            var chart = new CanvasJS.Chart("chartContainer", {
                theme:"light2",
                animationEnabled: true,
                title:{
                    text: "Performance Chart"
                },
                axisY: {
                    title: "Grades",
                   // showInLegend: true,
                   // stripLines: [{
                      //  color:"red",
                     //   value: average,
                      //  label: "Average"
                   // }]
                },
                data: [finalarray]

            });
            chart.render();
        }
    });
    </script>

</head>
<body>
<div id="chartContainer" style="height: 300px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
</body>
</html>